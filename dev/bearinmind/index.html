<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Things to bear in mind · Grumps.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Grumps.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../estimators/">Estimators</a></li><li><a class="tocitem" href="../quickstart/">Quick start</a></li><li><a class="tocitem" href="../objects/">User interface</a></li><li><a class="tocitem" href="../spreadsheet/">Spreadsheet formats</a></li><li><a class="tocitem" href="../example/">Example program</a></li><li><a class="tocitem" href="../tutorial/">Charlie&#39;s tutorial</a></li><li><a class="tocitem" href="../speedmemory/">Speed, memory, accuracy</a></li><li class="is-active"><a class="tocitem" href>Things to bear in mind</a><ul class="internal"><li><a class="tocitem" href="#Starting-values"><span>Starting values</span></a></li><li><a class="tocitem" href="#Memory-consumption"><span>Memory consumption</span></a></li><li><a class="tocitem" href="#Zero-shares"><span>Zero shares</span></a></li><li><a class="tocitem" href="#Efficiency"><span>Efficiency</span></a></li><li><a class="tocitem" href="#Floating-point-numbers"><span>Floating point numbers</span></a></li><li><a class="tocitem" href="#Nesting-of-memsave"><span>Nesting of memsave</span></a></li></ul></li><li><a class="tocitem" href="../extending/">Extending Grumps</a></li><li><a class="tocitem" href="../aliens/">Languages other than Julia</a></li><li><a class="tocitem" href="../structure/">Directory structure</a></li><li><a class="tocitem" href="../flow/">Algorithm flow</a></li><li><a class="tocitem" href="../misc/">Miscellanea</a></li><li><a class="tocitem" href="../acknowledgments/">Acknowledgments</a></li><li><a class="tocitem" href="../license/">License</a></li><li><a class="tocitem" href="../versions/">Versions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Things to bear in mind</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Things to bear in mind</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NittanyLion/Grumps.jl/blob/main/docs/src/bearinmind.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Things-to-bear-in-mind"><a class="docs-heading-anchor" href="#Things-to-bear-in-mind">Things to bear in mind</a><a id="Things-to-bear-in-mind-1"></a><a class="docs-heading-anchor-permalink" href="#Things-to-bear-in-mind" title="Permalink"></a></h1><h2 id="Starting-values"><a class="docs-heading-anchor" href="#Starting-values">Starting values</a><a id="Starting-values-1"></a><a class="docs-heading-anchor-permalink" href="#Starting-values" title="Permalink"></a></h2><p>The global objective function is nearly convex in <span>$\delta$</span>, so convergence of the inner optimization is generally uneventful.  Although the objective function is not convex in <span>$\theta$</span>, the outer optimization usually achieves the optimum from a single starting value.  However, this is not guaranteed.  </p><p>The most frequent case in which this would go wrong is when one or more of the <span>$\theta^\nu$</span> coefficients goes to zero and gets stuck.  This is more likely to happen when there are identification problems, e.g. when <span>$\theta^z \approx 0$</span> and the product level moments do not provide much identifying power.  Just try a few other starting values.</p><h2 id="Memory-consumption"><a class="docs-heading-anchor" href="#Memory-consumption">Memory consumption</a><a id="Memory-consumption-1"></a><a class="docs-heading-anchor-permalink" href="#Memory-consumption" title="Permalink"></a></h2><p>The program will become memory-hungry when the number of random coefficients is increased (assuming micro data are used).    Look at the <code>memsave</code> option to reduce memory consumption.</p><h2 id="Zero-shares"><a class="docs-heading-anchor" href="#Zero-shares">Zero shares</a><a id="Zero-shares-1"></a><a class="docs-heading-anchor-permalink" href="#Zero-shares" title="Permalink"></a></h2><p>The estimation procedure in <a href="http://joris.pinkse.org/paper/grumps/">Grieco, Murry, Pinkse, and Sagl (2022)</a> offers some robustness to shares that are equal to or very close to zero.  However, that requires that the product level moments are overidentified.</p><h2 id="Efficiency"><a class="docs-heading-anchor" href="#Efficiency">Efficiency</a><a id="Efficiency-1"></a><a class="docs-heading-anchor-permalink" href="#Efficiency" title="Permalink"></a></h2><p>The estimation procedure in <a href="http://joris.pinkse.org/paper/grumps/">Grieco, Murry, Pinkse, and Sagl (2022)</a> is efficient if an optimal weight matrix for the product level moments (GMM) portion is used whenever there is overidentification in the product level moments.  This is usually accomplished in a two step procedure.  </p><p>The default procedure in Grumps is a single step procedure with weight matrix <span>$(B^T B)^{-1}$</span>.  This produces estimates that are consistent with valid standard errors but that are not necessarily fully efficient.  </p><p>See <a href="../objects/#Grumps.DataOptions-Tuple{}"><code>DataOptions()</code></a> on how to achieve full efficiency using a two step procedure.  </p><div class="admonition is-success"><header class="admonition-header">Starting values of second stage</header><div class="admonition-body"><p>One can use the first stage estimates as starting values of the second stage.  Since the first stage estimates converge at the optimal rate, also, this second stage optimization should converge quickly.</p></div></div><h2 id="Floating-point-numbers"><a class="docs-heading-anchor" href="#Floating-point-numbers">Floating point numbers</a><a id="Floating-point-numbers-1"></a><a class="docs-heading-anchor-permalink" href="#Floating-point-numbers" title="Permalink"></a></h2><p>All numbers should be in the same floating point format.  The default (and only heavily tested) format is Float64, i.e. a 64-bit float.  But the code is designed to handle other formats.  This could be attractive if greater precision is desired.  So one could use some form of BigFloat, at the expense of increased memory use and a substantial increase in computation time.</p><h2 id="Nesting-of-memsave"><a class="docs-heading-anchor" href="#Nesting-of-memsave">Nesting of memsave</a><a id="Nesting-of-memsave-1"></a><a class="docs-heading-anchor-permalink" href="#Nesting-of-memsave" title="Permalink"></a></h2><p>If the <code>memsave</code> option (see <a href="../objects/#Optimization-options">Optimization options</a> and <a href="../speedmemory/#Memory-conservation">Memory conservation</a>) is set to <code>true</code> then Grumps will use some low level code to avoid having to repeatedly allocate and free memory.  What this means is that it is a bad idea to have <code>grumps!</code> called from multiple threads simultaneously: from multiple processes should be fine.  If you do not know what this means then you should be ok. </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../speedmemory/">« Speed, memory, accuracy</a><a class="docs-footer-nextpage" href="../extending/">Extending Grumps »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 13 September 2023 01:01">Wednesday 13 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
