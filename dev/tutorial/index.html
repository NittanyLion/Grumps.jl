<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Charlie&#39;s tutorial · Grumps.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Grumps.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../estimators/">Estimators</a></li><li><a class="tocitem" href="../quickstart/">Quick start</a></li><li><a class="tocitem" href="../objects/">User interface</a></li><li><a class="tocitem" href="../spreadsheet/">Spreadsheet formats</a></li><li><a class="tocitem" href="../example/">Example program</a></li><li class="is-active"><a class="tocitem" href>Charlie&#39;s tutorial</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Data"><span>Data</span></a></li><li><a class="tocitem" href="#Grumps-Package-Installation"><span><code>Grumps</code> Package Installation</span></a></li><li><a class="tocitem" href="#Estimation"><span>Estimation</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li><li><a class="tocitem" href="#Appendix-A:-Description-of-Datasets"><span>Appendix A: Description of Datasets</span></a></li></ul></li><li><a class="tocitem" href="../speedmemory/">Speed, memory, accuracy</a></li><li><a class="tocitem" href="../bearinmind/">Things to bear in mind</a></li><li><a class="tocitem" href="../extending/">Extending Grumps</a></li><li><a class="tocitem" href="../aliens/">Languages other than Julia</a></li><li><a class="tocitem" href="../structure/">Directory structure</a></li><li><a class="tocitem" href="../flow/">Algorithm flow</a></li><li><a class="tocitem" href="../misc/">Miscellanea</a></li><li><a class="tocitem" href="../acknowledgments/">Acknowledgments</a></li><li><a class="tocitem" href="../license/">License</a></li><li><a class="tocitem" href="../versions/">Versions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Charlie&#39;s tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Charlie&#39;s tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NittanyLion/Grumps.jl/blob/main/docs/src/tutorial.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="CLER-Tutorial-Using-Car-Data"><a class="docs-heading-anchor" href="#CLER-Tutorial-Using-Car-Data">CLER Tutorial Using Car Data</a><a id="CLER-Tutorial-Using-Car-Data-1"></a><a class="docs-heading-anchor-permalink" href="#CLER-Tutorial-Using-Car-Data" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>This tutorial explains how to use the package <code>Grumps.jl</code> to estimate demand, as described in Grieco, Murry, Pinkse, Sagl (2023). Although we do not have the same exact data and we deviate from the empirical specification, the exercise is meant to mimic the data environment in Petrin (2002), who estimates the demand for new cars using aggregate data on national shares and prices, and consumer survey data from the Consumer Expenditure Survey.  You can find the data and code at  <a href="https://github.com/NittanyLion/Grumps.jl/tree/main/extras/charliestutorial"><code>extras/charliestutorial</code></a></p><p>First, we describe the automobile data used for the tutorial and write a bit of Julia code to process the data so that it can be used by <code>Grumps</code>.   Second, we step through using <code>Grumps</code>.</p><h2 id="Data"><a class="docs-heading-anchor" href="#Data">Data</a><a id="Data-1"></a><a class="docs-heading-anchor-permalink" href="#Data" title="Permalink"></a></h2><h3 id="Data-Description"><a class="docs-heading-anchor" href="#Data-Description">Data Description</a><a id="Data-Description-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Description" title="Permalink"></a></h3><p>The data were originally collected by Grieco, Murry, and Yurukoglu (2023) and are, collectively, a subset of the data used in that paper.  We use Wards Automotive product-level data from 1980-2005, which includes prices, quantities, and vehicle attributes.  The data file is called <code>gmy_product.csv</code>. <em>Disclosure: The model names are anonymized and the variables have been slightly perturbed. These data should not be used for any commercial purpose.</em></p><p>We also use survey data from the automobile supplement to the Consumer Expenditures Survey from 1980–2005, where for each respondent we observe which car they purchased and various household characteristics.  The data file is called <code>gmy_cex_consumer.csv</code>.</p><p>In order to simulate the population of potential buyers, we use demographics from the consumer expenditure survey for the same time frame. The raw CPS data file is called <code>CPS_households.csv</code>.  We will need to process this data a bit. </p><p>Lastly, there is data on market sizes.  This is in the data file called <code>gmy_market.csv</code></p><h3 id="Data-Processing"><a class="docs-heading-anchor" href="#Data-Processing">Data Processing</a><a id="Data-Processing-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Processing" title="Permalink"></a></h3><p>Let&#39;s start working with the data in Julia. First let&#39;s load all of the packages we will need.</p><pre><code class="language-julia hljs">using Grumps
using Revise, CSV, LinearAlgebra, DelimitedFiles, Random
using DataFrames, DataFramesMeta

Random.seed!(16802)</code></pre><h3 id="Process-the-CPS-data"><a class="docs-heading-anchor" href="#Process-the-CPS-data">Process the CPS data</a><a id="Process-the-CPS-data-1"></a><a class="docs-heading-anchor-permalink" href="#Process-the-CPS-data" title="Permalink"></a></h3><p>Next we will write a function to process the CPS data to make it look like the CEX survey data. In the end, these files should have identical variable names. </p><pre><code class="language-julia hljs">function makeCPS(;numDraws=10_000)
# Description: reads in raw CPS data, draws random sample, 
# and creates varaibles for estimation
#
# Inputs:
# numDraws      | Number of random draws (optional, default = 10_000)

@subset!(df_cps, :hhincome.&gt;0)

years = 1980:2005
nYrs = length(years)
df_draws = DataFrame()
for ix in years
    df_tmp = df_cps[df_cps.year.==ix,[:year, :rural, :hhincome, :married, :numchildren, :age]]
    sz = size(df_tmp)[1]
    idx = rand(1:sz,10_000)
    df_draws = vcat(df_draws, df_tmp[idx,:])
end

@transform!(df_draws, :urban = 1 .- :rural)
@transform!(df_draws, :fam_size = 1 .+ :married .+ :numchildren)
@transform!(df_draws, :income = :hhincome./10_000)
@transform!(df_draws, :inc2 = :income.^2)
df_draws.log_inc = log.(df_draws.hhincome)

CSV.write(&quot;gmy_draws.csv&quot;,df_draws)
end</code></pre><p>This function reads in <code>CPS_households.csv</code> to a data frame, subsets to only positive incomes, then for each year draws 10,000 random people. Then it generates new variables to match with the CEX survey data and writes the new data to <code>gmy_draws.csv</code>.</p><p>Now let&#39;s just call this function to process the CPS data.</p><pre><code class="language-julia hljs">makeCPS()</code></pre><h3 id="Subset-the-data"><a class="docs-heading-anchor" href="#Subset-the-data">Subset the data</a><a id="Subset-the-data-1"></a><a class="docs-heading-anchor-permalink" href="#Subset-the-data" title="Permalink"></a></h3><p>We may want to run our estimation on datasets of different sizes, so next I create a function to subset the data for the final estimation run and saves them to separate files that we will later load with the estimation routine. The following function subsets the data in terms of markets (years) and the number of micro consumers we use from the survey data. </p><pre><code class="language-julia hljs">function makeDataForEstimation(beg_year, end_year, num_cons=nothing)
    # Description: Function to subset data
    #
    # Inputs:
    # beg_year  | first year
    # end_year  | last year
    # num_cons  | number of micro consumers per year (optional, default=nothing)

    # Consumer Sample
    df_cons = CSV.read(&quot;gmy_cex_consumer.csv&quot;,DataFrame)
    @subset!(df_cons,:income.&gt;0)
    @transform!(df_cons, :log_inc = log.(:income))
    @transform!(df_cons, :income = :income./10_000)
    @transform!(df_cons, :inc2 = (:income).^2)
    @subset!(df_cons, :year .&gt;= beg_year)
    @subset!(df_cons, :year .&lt;= end_year)

    if num_cons !== nothing        # Further subsets the consumer data (optional)
        years = unique(df_cons.year)
        df_new = DataFrame()
        for ix in years
            df_tmp = df_cons[df_cons.year.==ix,:]
            sz = size(df_tmp)[1]
            idx = rand(1:sz,num_cons)
            df_new = vcat(df_new, df_tmp[idx,:])    
        end
        CSV.write(&quot;consumer.csv&quot;,df_new)
    else
        CSV.write(&quot;consumer.csv&quot;,df_cons)
    end

    # Products
    df_prod = CSV.read(&quot;gmy_product.csv&quot;, DataFrame)
    @subset!(df_prod, :year .&gt;= beg_year)
    @subset!(df_prod, :year .&lt;= end_year)
    CSV.write(&quot;product.csv&quot;, df_prod)

    # Markets
    df_market = CSV.read(&quot;gmy_market.csv&quot;, DataFrame)
    @subset!(df_market, :year .&gt;= beg_year)
    @subset!(df_market, :year .&lt;= end_year)
    CSV.write(&quot;market.csv&quot;, df_market)
    
    # CPS draws
    df_draws = CSV.read(&quot;gmy_draws.csv&quot;, DataFrame)
    @subset!(df_draws, :year .&gt;= beg_year)
    @subset!(df_draws, :year .&lt;= end_year)
    CSV.write(&quot;draws.csv&quot;, df_draws)   
end</code></pre><p>Run this function, specifying the years and that we only want 100 micro consumers oer year. </p><pre><code class="language-julia hljs">makeDataForEstimation(1985,2000,100)</code></pre><h2 id="Grumps-Package-Installation"><a class="docs-heading-anchor" href="#Grumps-Package-Installation"><code>Grumps</code> Package Installation</a><a id="Grumps-Package-Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Grumps-Package-Installation" title="Permalink"></a></h2><p><code>Grumps.jl</code> is available from the <code>Julia</code> package repository. To add it to your installation</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;Grumps&quot;)</code></pre><p>Julia makes use of parallelization. To invoke <code>Julia</code> with 4 threads on your local machine (for example) invoke <code>Julia</code> in the following way.</p><pre><code class="language-bash hljs">julia -t 4 &quot;myprog.jl&quot;</code></pre><p>See the <a href="https://nittanylion.github.io/Grumps.jl/dev/installation/">Installation and invocation</a> page on the docs for more detail. </p><h2 id="Estimation"><a class="docs-heading-anchor" href="#Estimation">Estimation</a><a id="Estimation-1"></a><a class="docs-heading-anchor-permalink" href="#Estimation" title="Permalink"></a></h2><p>Now we are ready to use <code>Grumps.jl</code> to estimate demand for cars. The way to call the estimator is through the following function call</p><pre><code class="language-julia hljs">sol = grumps!(e,d,o)</code></pre><p>where <code>e</code> is the &quot;Estimator&quot; structure that tell <code>Grumps</code> which estimator to use, <code>d</code> is the &quot;Data&quot; structure that tells <code>Grumps</code> where the data is and which variables to use, and <code>o</code> is a &quot;Estimation Options&quot; structure that supplies various computation options to the program. The function call returns a structure that we have names <code>sol</code>.</p><h3 id="Estimator"><a class="docs-heading-anchor" href="#Estimator">Estimator</a><a id="Estimator-1"></a><a class="docs-heading-anchor-permalink" href="#Estimator" title="Permalink"></a></h3><p>First, let&#39;s pick a estimator, <code>e</code>. The main estimator described in the paper is the <code>:cler</code> estimator. The code also implements is an alternative (and asymptotically equivalent) estimator called <code>:cheap</code> that uses less memory and should be faster. Other options are in the following table</p><table><tr><th style="text-align: right">Estimator</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>:cler</code></td><td style="text-align: right">main estimator described in the paper</td></tr><tr><td style="text-align: right"><code>:cheap</code></td><td style="text-align: right">computationally cheaper version of <code>:cler</code></td></tr><tr><td style="text-align: right"><code>:mdle</code></td><td style="text-align: right">version of <code>:cler</code> without the product-level restrictions, <span>$\hat{\Pi}$</span></td></tr><tr><td style="text-align: right"><code>:shareconstraint</code></td><td style="text-align: right">Further implements the BLP contraction mapping to get <span>$\delta$</span>&#39;s</td></tr><tr><td style="text-align: right"><code>:mixedlogit</code></td><td style="text-align: right">Uses only the likelihood of individual choices</td></tr></table><p>We will implement <code>:cler</code> for the purposes of the tutorial. If this uses too much memory for you, switch to using the <code>:cheap</code> method.</p><pre><code class="language-julia hljs">e = Estimator( :cler )</code></pre><h3 id="Data-2"><a class="docs-heading-anchor" href="#Data-2">Data</a><a class="docs-heading-anchor-permalink" href="#Data-2" title="Permalink"></a></h3><p>Now let&#39;s tell Grumps about our data. The data structure is formed by the following call:</p><pre><code class="language-julia hljs">d = Data( e, s, v ) </code></pre><p>which takes <code>e</code>, the same &quot;Estimator&quot; object as above, <code>s</code>, a &quot;Sources&quot; object, and <code>v</code>, a &quot;Variables&quot; object. We tell Grumps where the data are located with the following source object. </p><pre><code class="language-julia hljs">s = Sources(                                                            
  consumers = &quot;consumer.csv&quot;,
  products = &quot;product.csv&quot;,
  marketsizes = &quot;market.csv&quot;,
  draws = &quot;draws.csv&quot;  
)</code></pre><h3 id="Variables"><a class="docs-heading-anchor" href="#Variables">Variables</a><a id="Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Variables" title="Permalink"></a></h3><p>Lastly, we can tell Grumps about the specification of the model, or which &quot;Variables&quot; to include. This can be a large object with many sub-structures because the model can be pretty complicated. </p><h4 id="Demographic-Interactions"><a class="docs-heading-anchor" href="#Demographic-Interactions">Demographic Interactions</a><a id="Demographic-Interactions-1"></a><a class="docs-heading-anchor-permalink" href="#Demographic-Interactions" title="Permalink"></a></h4><p>List interactions between car attributes and demographic characteristics in the &quot;interactions&quot; sub-object. List the demographic variable first and the product attribute</p><pre><code class="language-julia hljs">v = Variables( 
    # these are the z_{im} * x_{jm} terms in the paper                                                         
    interactions =  [                                                   
        :log_inc :msrp; 
        :fam_size :van;
        :urban :truck;
        :log_inc :constant;
        ],</code></pre><h4 id="Random-Coefficients"><a class="docs-heading-anchor" href="#Random-Coefficients">Random Coefficients</a><a id="Random-Coefficients-1"></a><a class="docs-heading-anchor-permalink" href="#Random-Coefficients" title="Permalink"></a></h4><p>Next can specify the random coefficients. If you want more than one, you can separate them with a &quot;;&quot;.</p><pre><code class="language-julia hljs">    # these are the x_{jm} * ν terms in the paper
    randomcoefficients =  [:log_mpg],</code></pre><h4 id="Linear-Utility-Coefficients"><a class="docs-heading-anchor" href="#Linear-Utility-Coefficients">Linear Utility Coefficients</a><a id="Linear-Utility-Coefficients-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-Utility-Coefficients" title="Permalink"></a></h4><p>Next we can specify the product attributes that enter into the linear part of the utility and the instruments we will use as part of the product level exclusion restrictions. Notice how we include price as a regressor but exclude it as an instrument. Here, we are including two instruments, so that the model in over-identified. </p><pre><code class="language-julia hljs">    # these are the x_{jm} terms in the paper                            
    regressors =  [ :constant; :log_mpg; :log_hp; :log_footprint; :log_curbweight; :suv; :van; :truck; :msrp],      
    # these are the b_{jm} terms in the paper                      
    instruments = [:constant; :log_mpg; :log_hp; :log_footprint; :log_curbweight; :suv; :van; :truck; :lag_pl_con; :IV1; :IV3], </code></pre><h4 id="Other-Variables"><a class="docs-heading-anchor" href="#Other-Variables">Other Variables</a><a id="Other-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Other-Variables" title="Permalink"></a></h4><p>Lastly there are other variables we have the option to specify in the model. We can tell Grumps what to call the outside good, what we call the market in our datasets (in the car data, a market is <code>:year</code>), what variable contains product shares (<code>:share</code>), and what variable denotes different products (<code>:model</code> in our case). Optionally, we can include a categorical variable that Grumps can include as dummies, and if there is a dummy variable that we want to control for, but we don&#39;t care about the coefficients, we can list that as a &quot;nuisancedummy.&quot; Here we include year and make effects, and we don&#39;t care about the make coefficients. </p><pre><code class="language-julia hljs">    outsidegood   = &quot;outsidegood&quot;,   
    market          = :year,
    share           = :share,
    product         = :model,
    dummies         = [:year],
    # nuisancedummy   = :make # I don&#39;t have this in the data, but if I did...
)</code></pre><h4 id="Estimation-2"><a class="docs-heading-anchor" href="#Estimation-2">Estimation</a><a class="docs-heading-anchor-permalink" href="#Estimation-2" title="Permalink"></a></h4><p>Now we could put everything we did to set up estimation into a function and call that function. It will have the following structure where the &quot;...&quot; is just a placeholder for the code in the blocks above. </p><pre><code class="language-julia hljs">function my_estimation(nodes, draws, meth)
    e = Estimator(meth)
    s = Sources(...)
    v = Variables(...)
    d = Data(...)

    sol = grumps!(e,d)  
end

nodes = 11
draws = 2_000
meth = :cheap

sol = my_estimation(nodes, draws, meth)
 ```

We can use the &quot;Save&quot; feature of Grumps to write our solution structure to a text file. </code></pre><p>julia Grumps.Save(&quot;myresults_meth.txt&quot;,sol) ```</p><p>If everything is in a <code>.jl</code> file, the we call the file from the command line, specifying the number of threads we would like to use. See the accompanying <code>tutorial.jl</code> file to see the finished result. Iterations on my laptop using six threads take about 200 seconds, so you&#39;ll have to wait a few minutes before you start seeing iteration output. </p><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><p>Petrin, Amil. &quot;Quantifying the benefits of new products: The case of the minivan.&quot; Journal of political Economy 110, no. 4 (2002): 705-729.</p><p>Grieco, Paul and Murry, Charles and Pinkse, Joris and Sagl, Stephan. &quot;Conformant and Efficient Estimation of Discrete Choice Demand Models.&quot; working paper, Penn State University (2023).</p><p>Grieco, Paul L. E., Charles Murry, and Ali Yurukoglu. “The Evolution of Market Power in the US Auto Industry.” Working Paper. Working Paper Series. National Bureau of Economic Research, July 2021. https://doi.org/10.3386/w29013.</p><h2 id="Appendix-A:-Description-of-Datasets"><a class="docs-heading-anchor" href="#Appendix-A:-Description-of-Datasets">Appendix A: Description of Datasets</a><a id="Appendix-A:-Description-of-Datasets-1"></a><a class="docs-heading-anchor-permalink" href="#Appendix-A:-Description-of-Datasets" title="Permalink"></a></h2><h3 id="gmy_product.csv"><a class="docs-heading-anchor" href="#gmy_product.csv">gmy_product.csv</a><a id="gmy_product.csv-1"></a><a class="docs-heading-anchor-permalink" href="#gmy_product.csv" title="Permalink"></a></h3><p>Unit of observation is a year-model.</p><table><tr><th style="text-align: right">Variable</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right">year</td><td style="text-align: right">float</td><td style="text-align: right">year of sales / modelyear</td></tr><tr><td style="text-align: right">model</td><td style="text-align: right">int</td><td style="text-align: right">unique model ID (same model is same ID across years)</td></tr><tr><td style="text-align: right">share</td><td style="text-align: right">float</td><td style="text-align: right">sales / market size</td></tr><tr><td style="text-align: right">msrp</td><td style="text-align: right">float</td><td style="text-align: right">price of the the vehicle</td></tr><tr><td style="text-align: right">log_footprint</td><td style="text-align: right">float</td><td style="text-align: right">car height in inches</td></tr><tr><td style="text-align: right">log_curbweight</td><td style="text-align: right">float</td><td style="text-align: right">(p 50) curbweight</td></tr><tr><td style="text-align: right">log_hp</td><td style="text-align: right">float</td><td style="text-align: right">horsepower</td></tr><tr><td style="text-align: right">log_mpg</td><td style="text-align: right">float</td><td style="text-align: right">MPG rating (city or combined if city missing)</td></tr><tr><td style="text-align: right">regionUS</td><td style="text-align: right">float</td><td style="text-align: right">dummy: brand region is US (eg Chrysler is US, Fiat is EU)</td></tr><tr><td style="text-align: right">regionEU</td><td style="text-align: right">float</td><td style="text-align: right">dummy: brand region is EU (eg Chrysler is US, Fiat is EU)</td></tr><tr><td style="text-align: right">regionASIA</td><td style="text-align: right">float</td><td style="text-align: right">dummy: brand region is Asia</td></tr><tr><td style="text-align: right">EV</td><td style="text-align: right">float</td><td style="text-align: right">dummy: car is completely electric powered or a PHEV</td></tr><tr><td style="text-align: right">make2num</td><td style="text-align: right">int</td><td style="text-align: right">vehicle make ID (smallest britsh makes combined into one)</td></tr><tr><td style="text-align: right">suv</td><td style="text-align: right">int</td><td style="text-align: right">dummy: vehicle is SUV or CUV</td></tr><tr><td style="text-align: right">truck</td><td style="text-align: right">int</td><td style="text-align: right">dummy: vehicle is a pickup truck</td></tr><tr><td style="text-align: right">van</td><td style="text-align: right">int</td><td style="text-align: right">dummy: vehicle is a van</td></tr><tr><td style="text-align: right">car</td><td style="text-align: right">float</td><td style="text-align: right">dummy: aggregate of sedan, couple, hatchback and other car styles</td></tr><tr><td style="text-align: right">lag<em>pl</em>con</td><td style="text-align: right">float</td><td style="text-align: right">lagged real exchage rate of production country</td></tr><tr><td style="text-align: right">iv_prod</td><td style="text-align: right">int</td><td style="text-align: right">dummy: production country == hq country</td></tr><tr><td style="text-align: right">IV1</td><td style="text-align: right">float</td><td style="text-align: right">number of products available for the same vehicle type</td></tr><tr><td style="text-align: right">IV2</td><td style="text-align: right">float</td><td style="text-align: right">Ghandi-Houde IV for horsepower</td></tr><tr><td style="text-align: right">IV3</td><td style="text-align: right">float</td><td style="text-align: right">GH IV for mpg</td></tr><tr><td style="text-align: right">IV4</td><td style="text-align: right">float</td><td style="text-align: right">GH IV for footprint</td></tr><tr><td style="text-align: right">IV5</td><td style="text-align: right">float</td><td style="text-align: right">GH IV for curbweight</td></tr><tr><td style="text-align: right">IV6</td><td style="text-align: right">float</td><td style="text-align: right">number of products available for the same HQ region</td></tr><tr><td style="text-align: right">IV7</td><td style="text-align: right">float</td><td style="text-align: right">number of products available for the same type and HQ region</td></tr></table><h3 id="gmy_market.csv"><a class="docs-heading-anchor" href="#gmy_market.csv">gmy_market.csv</a><a id="gmy_market.csv-1"></a><a class="docs-heading-anchor-permalink" href="#gmy_market.csv" title="Permalink"></a></h3><p>Unit of observation is a year.</p><table><tr><th style="text-align: right">Variable</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right">year</td><td style="text-align: right">int</td><td style="text-align: right">year of sales / modelyear</td></tr><tr><td style="text-align: right">N</td><td style="text-align: right">float</td><td style="text-align: right">Total number of US household that year, Census (unit of obs: year)</td></tr></table><h3 id="gmy*cex*consumer.csv"><a class="docs-heading-anchor" href="#gmy*cex*consumer.csv">gmy<em>cex</em>consumer.csv</a><a id="gmy*cex*consumer.csv-1"></a><a class="docs-heading-anchor-permalink" href="#gmy*cex*consumer.csv" title="Permalink"></a></h3><p>Unit of observation is a suvey response. A survey takes place in a single year, and always includes a choice of a car. </p><table><tr><th style="text-align: right">Variable</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right">year</td><td style="text-align: right">int</td><td style="text-align: right">year of sales / modelyear</td></tr><tr><td style="text-align: right">choice</td><td style="text-align: right">int</td><td style="text-align: right">model ID corresponsing to purchase decision</td></tr><tr><td style="text-align: right">income</td><td style="text-align: right">float</td><td style="text-align: right">househild income</td></tr><tr><td style="text-align: right">fam_size</td><td style="text-align: right">int</td><td style="text-align: right">number of household members</td></tr><tr><td style="text-align: right">urban</td><td style="text-align: right">int</td><td style="text-align: right">dummy: 1 if the household location is urban.</td></tr></table><h3 id="gmy_draws.csv"><a class="docs-heading-anchor" href="#gmy_draws.csv">gmy_draws.csv</a><a id="gmy_draws.csv-1"></a><a class="docs-heading-anchor-permalink" href="#gmy_draws.csv" title="Permalink"></a></h3><p>Unit of observation is a survey response. A survey takes place in a single year. These are population draws from the Consumer Population Survey.  </p><table><tr><th style="text-align: right">Variable</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right">year</td><td style="text-align: right">int</td><td style="text-align: right">year of sales / modelyear</td></tr><tr><td style="text-align: right">weight</td><td style="text-align: right">float</td><td style="text-align: right">CPS sampling weights.</td></tr><tr><td style="text-align: right">rural</td><td style="text-align: right">int</td><td style="text-align: right">dummy: household in non-urban location</td></tr><tr><td style="text-align: right">hhincome</td><td style="text-align: right">float</td><td style="text-align: right">househild income</td></tr><tr><td style="text-align: right">married</td><td style="text-align: right">int</td><td style="text-align: right">dummy: 1 if respondent married</td></tr><tr><td style="text-align: right">numchildren</td><td style="text-align: right">int</td><td style="text-align: right">number of children in household</td></tr><tr><td style="text-align: right">other variables not used</td><td style="text-align: right"></td><td style="text-align: right"></td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../example/">« Example program</a><a class="docs-footer-nextpage" href="../speedmemory/">Speed, memory, accuracy »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 7 September 2023 15:57">Thursday 7 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
