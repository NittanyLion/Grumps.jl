<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Methods and types · Grumps.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Grumps.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../quickstart/">Quick Start</a></li><li class="is-active"><a class="tocitem" href>Methods and types</a><ul class="internal"><li><a class="tocitem" href="#Data-entry"><span>Data entry</span></a></li><li><a class="tocitem" href="#Optimization-options"><span>Optimization options</span></a></li><li><a class="tocitem" href="#Estimator-choice"><span>Estimator choice</span></a></li><li><a class="tocitem" href="#Data-object-creation"><span>Data object creation</span></a></li><li><a class="tocitem" href="#Algorithm-call"><span>Algorithm call</span></a></li><li><a class="tocitem" href="#Retrieving-results"><span>Retrieving results</span></a></li><li><a class="tocitem" href="#Extending-Grumps"><span>Extending Grumps</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Methods and types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Methods and types</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NittanyLion/Grumps.jl/blob/master/docs/src/objects.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Methods-and-types"><a class="docs-heading-anchor" href="#Methods-and-types">Methods and types</a><a id="Methods-and-types-1"></a><a class="docs-heading-anchor-permalink" href="#Methods-and-types" title="Permalink"></a></h1><h2 id="Data-entry"><a class="docs-heading-anchor" href="#Data-entry">Data entry</a><a id="Data-entry-1"></a><a class="docs-heading-anchor-permalink" href="#Data-entry" title="Permalink"></a></h2><p>The methods below are used to enter data into Grumps.</p><article class="docstring"><header><a class="docstring-binding" id="Grumps.Sources-Tuple{}" href="#Grumps.Sources-Tuple{}"><code>Grumps.Sources</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Sources( 
    T           = DefaultSourceTypes; 
    consumers   :: Any = nothing, 
    products    :: Any = nothing, 
    marketsizes :: Any = nothing, 
    draws       :: Any = nothing,
    user        :: Any = nothing
)</code></pre><p>Creates a GrumpsSources object with source type entries of type T where the entries are provided in the optional parameters.</p><p>Grumps (potentially) uses four data sources: a data source for consumer-level data, one for product-level data, one for market size information, and one for demographic draws.  Only the product-level data are required, but are by themselves insufficient.  For instance, for BLP95 one needs information on products, market sizes, and demographics; for the Grumps estimator one needs all four types of data; for a multinomial logit both consumer and product information are needed.  Not all data are needed for all markets.  For instance, it is ok for some estimators for there to be consumer-level data in some markets but not others.</p><p>The T argument is mostly there to allow for future expansion, so the description below applies to the case in which T = DefaultSourceTypes.</p><p>By default, the entries can be nothing, a string, a DataFrame, or a SourceFileType.  If an entry is nothing, it means that no such data is to be used.  If an entry is a string then it is converted to a SourceFileCSV entry with comma delimiter where the string name is the file name.  To use other source file types, create a SourceFileType first.  A DataFrame can be passed, also.  In all cases other than nothing, data will eventually be (converted to) a DataFrame and parsed from that.</p><p>The <em>consumers</em> variable specifies where consumer-level data can be found, the <em>products</em> variable is for the product-level data, <em>marketsizes</em> is for market sizes, and <em>draws</em> is for demographic draws; <em>user</em> has not been implemented yet.</p><p>Use the <strong>Variables</strong> method to specify the way the data sources are formatted and the specification to estimate.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/source.jl#L35-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.Variables-Tuple{}" href="#Grumps.Variables-Tuple{}"><code>Grumps.Variables</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function Variables( ; 
  market              :: Symbol = :market,
  choice              :: Symbol = :choice,
  interactions        :: Mat{Symbol} = [],
  randomcoefficients  :: Vec{Symbol} = [],
  outsidegood         :: String = &quot;outsidegood&quot;,
  share               :: Symbol = :share,
  marketsize          :: Symbol = :N,
  regressors          :: Vec{Symbol} = [],
  instruments         :: Vec{Symbol} = [],
  dummies             :: Vec{Symbol} = [],
  nuisancedummy       :: Symbol = :none,
  microinstruments    :: Mat{Symbol} = [],
  user                :: Mat{Symbol} = []
    )</code></pre><p>This method creates an object of type GrumpsVariables.  It contains references to the variables that Grumps uses to create variables from the data sources specified by the call to the <strong>Sources</strong> function. </p><p>For instance, <em>market</em> is the column heading in the source spreadsheets for the market indicator.  This get&#39;s passed as a symbol, so the default (:market) says that the column heading is <em>market</em>, which is both case and spaces sensititve.  The same column heading  is used across all sources.  All entries with the exception of <em>outsidegood</em> refer to the column heading: <em>outsidegood</em> refers to the label used for the outside good, which should be the same across both spreadsheets and markets.</p><p><em>market</em> refers to the variable containing the market indicator in all input datasets</p><p><em>product</em> refers to the variable containing the product indicator in the product dataset</p><p><em>choice</em> refers to the variable indicating the choice indicator in the consumer level datasets</p><p><em>interactions</em> refers to the variables indicating consumer and product variable interactions (each row contains consumer variable, product variable)</p><p><em>randomcoefficients</em> refers to the product level variables that have a random coefficient on them</p><p><em>outsidegood</em> refers to the label used for the outside good</p><p><em>share</em> refers to the label used for the product level share</p><p><em>marketsize</em> refers to the size of the market (number of people)</p><p><em>regressors</em> refers to the label used for the second stage regressors</p><p><em>instruments</em> refers to the label used for the second stage instruments</p><p><em>dummies</em> refers to discrete variables to be converted to second stage dummy regressors and instruments</p><p><em>nuisancedummy</em> refers to at most one variable to be converted to a second stage dummy regressors and instrument whose coefficient value is of no interest</p><p><em>microinstruments</em> refers to micro instruments, which are only relevant for gmm style procedures</p><p><em>user</em> refers to a list of variables to be added to the consumer-product interactions using a user-specified procedure</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/variables.jl#L46-L99">source</a></section></article><h2 id="Optimization-options"><a class="docs-heading-anchor" href="#Optimization-options">Optimization options</a><a id="Optimization-options-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization-options" title="Permalink"></a></h2><p>The default optimization options are sensible, in which case this section can be skipped.  But for those who want to play with tolerances and such, have at it.</p><article class="docstring"><header><a class="docstring-binding" id="Grumps.OptimizationOptions-Tuple{}" href="#Grumps.OptimizationOptions-Tuple{}"><code>Grumps.OptimizationOptions</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">OptimizationOptions(; 
θopt = OptimOptionsθ(), 
δopt = OptimOptionsδ(), 
threads = GrumpsThreads(), 
memsave = false, 
maxrepeats = 4, 
probtype = :fast )</code></pre><p>Sets the options used for numerical optimization.  <em>θopt</em> is used for the external optimization routine, <em>δopt</em> for the internal one.  These are both of type <em>OptimOptions</em>; see the <em>OptimOptionsθ</em> and <em>OptimOptionsδ</em> methods for elaboration.  The <em>memsave</em> variable is set to false by default; turning it on will reduce memory consumption significantly, but will also slow down computation.  The variable <em>maxrepeats</em> may disappear in the  future.  </p><p>Finally, there are two ways of computing choice probabilities: robust and fast, specified by passing <em>:robust</em> or <em>:fast</em> in <em>probtype</em>. Fast choice probabilities are the default for good reason.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/options.jl#L149-L166">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.OptimOptionsθ-Tuple{}" href="#Grumps.OptimOptionsθ-Tuple{}"><code>Grumps.OptimOptionsθ</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">OptimOptionsθ(; 
f_tol = 1.0e-8, 
g_tol = 1.0e-4, 
x_tol = 1.0e-5, 
iterations = 25, 
show_trace = true, 
store_trace = true, 
extended_trace = true )</code></pre><p>Creates and returns an <em>OptimOptions</em> optimization options variable for the outer optimization algorithm, including the function value tolerance, the gradient tolerance, the solution tolerance, the maximum number of iterations, whether to show the trace, whether to store the trace, and whether to keep the extended trace.  See the <strong>Optim</strong> package for details.  </p><p>The current version of Grumps will largely ignore the trace-related parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/options.jl#L56-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.OptimOptionsδ-Tuple{}" href="#Grumps.OptimOptionsδ-Tuple{}"><code>Grumps.OptimOptionsδ</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">OptimOptionsδ( ; 
f_tol = 1.0e-8, 
g_tol = 1.0e-8, 
x_tol = 1.0e-6, 
iterations = 25, 
show_trace = false, 
store_trace = true, 
extended_trace = false )</code></pre><p>Creates and returns an <em>OptimOptions</em> optimization options variable for the inner optimization algorithm, including the function value tolerance, the gradient tolerance, the solution tolerance, the maximum number of iterations, whether to show the trace, whether to store the trace, and whether to keep the extended trace.  See the <strong>Optim</strong> package for details.  </p><p>The current version of Grumps will largely ignore the trace-related parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/options.jl#L76-L91">source</a></section></article><h2 id="Estimator-choice"><a class="docs-heading-anchor" href="#Estimator-choice">Estimator choice</a><a id="Estimator-choice-1"></a><a class="docs-heading-anchor-permalink" href="#Estimator-choice" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Grumps.Estimator-Tuple{String}" href="#Grumps.Estimator-Tuple{String}"><code>Grumps.Estimator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Estimator( s :: String )</code></pre><p>Creates and returns a GrumpsEstimator type.  Grumps is reasonably good at figuring out what it is that you want, so e.g. <em>Estimator( &quot;maximum likelihood&quot; )</em> gives you the unpenalized Grumps maximum likelihood estimator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/est/est.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.Estimator-Tuple{Symbol}" href="#Grumps.Estimator-Tuple{Symbol}"><code>Grumps.Estimator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Estimator( s :: Symbol )</code></pre><p>Creates and returns a GrumpsEstimator type.</p><p>This is one method of specifying the estimator used.  However, it unforgiving in that the exact symbol used internally must be passed, so the <em>Estimator( s :: String )</em> method is usually a better choice.</p><p>Possible choices include:</p><p><em>:plm</em> the penalized Grumps maximum likelihood estimator  <strong>not implemented yet</strong></p><p><em>:vanilla</em> the unpenalized Grumps maximum likelihood estimator</p><p><em>:shareconstraint</em> the unpenalized Grumps maximum likelihood estimator with share constraints</p><p><em>:gmm</em> GMM estimator that uses both micro and macro moments</p><p><em>:mixedlogit</em> mixed logit maximum likelihood estimator</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/est/est.jl#L23-L42">source</a></section></article><h2 id="Data-object-creation"><a class="docs-heading-anchor" href="#Data-object-creation">Data object creation</a><a id="Data-object-creation-1"></a><a class="docs-heading-anchor-permalink" href="#Data-object-creation" title="Permalink"></a></h2><p><strong>to be done</strong></p><h2 id="Algorithm-call"><a class="docs-heading-anchor" href="#Algorithm-call">Algorithm call</a><a id="Algorithm-call-1"></a><a class="docs-heading-anchor-permalink" href="#Algorithm-call" title="Permalink"></a></h2><p><strong>to be done</strong></p><h2 id="Retrieving-results"><a class="docs-heading-anchor" href="#Retrieving-results">Retrieving results</a><a id="Retrieving-results-1"></a><a class="docs-heading-anchor-permalink" href="#Retrieving-results" title="Permalink"></a></h2><p>As noted above, Grumps will return its results in a <em>GrumpsSolution</em> variable that can be queried as follows.  <strong>to be expanded</strong></p><article class="docstring"><header><a class="docstring-binding" id="Grumps.getθ-Tuple{GrumpsSolution}" href="#Grumps.getθ-Tuple{GrumpsSolution}"><code>Grumps.getθ</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getθ( sol :: GrumpsSolution )</code></pre><p>Returns a vector of GrumpsEstimate types for θ that can be queried for results.  See  <em>getcoef</em>, <em>getstde</em>, <em>gettstat</em>, and <em>getname</em>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/sol.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.getδ-Tuple{GrumpsSolution}" href="#Grumps.getδ-Tuple{GrumpsSolution}"><code>Grumps.getδ</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getδ( sol :: GrumpsSolution )</code></pre><p>Returns a vector of GrumpsEstimate types for δ that can be queried for results. See  <em>getcoef</em>, <em>getstde</em>, <em>gettstat</em>, and <em>getname</em>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/sol.jl#L51-L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.getβ-Tuple{GrumpsSolution}" href="#Grumps.getβ-Tuple{GrumpsSolution}"><code>Grumps.getβ</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getβ( sol :: GrumpsSolution )</code></pre><p>Returns a vector of GrumpsEstimate types for β that can be queried for results. See  <em>getcoef</em>, <em>getstde</em>, <em>gettstat</em>, and <em>getname</em>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/sol.jl#L59-L63">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.getcoef-Tuple{GrumpsEstimate}" href="#Grumps.getcoef-Tuple{GrumpsEstimate}"><code>Grumps.getcoef</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getcoef( e :: GrumpsEstimate )</code></pre><p>Returns the estimated coefficient value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/sol.jl#L66-L70">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.getstde-Tuple{GrumpsEstimate}" href="#Grumps.getstde-Tuple{GrumpsEstimate}"><code>Grumps.getstde</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getstde( e :: GrumpsEstimate )</code></pre><p>Returns the standard error.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/sol.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.gettstat-Tuple{GrumpsEstimate}" href="#Grumps.gettstat-Tuple{GrumpsEstimate}"><code>Grumps.gettstat</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gettstat( e :: GrumpsEstimate )</code></pre><p>Returns the t statistic.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/sol.jl#L80-L84">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Grumps.getname-Tuple{GrumpsEstimate}" href="#Grumps.getname-Tuple{GrumpsEstimate}"><code>Grumps.getname</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getname( e :: GrumpsEstimate )</code></pre><p>Returns the variable name.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NittanyLion/Grumps.jl/blob/8942684e3df1ddb863ed2381420fc34ac0a4d545/src/common/types/sol.jl#L87-L91">source</a></section></article><h2 id="Extending-Grumps"><a class="docs-heading-anchor" href="#Extending-Grumps">Extending Grumps</a><a id="Extending-Grumps-1"></a><a class="docs-heading-anchor-permalink" href="#Extending-Grumps" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickstart/">« Quick Start</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.17 on <span class="colophon-date" title="Monday 23 May 2022 00:35">Monday 23 May 2022</span>. Using Julia version 1.9.0-DEV.633.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
